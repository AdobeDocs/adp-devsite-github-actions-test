---
name: Nightly AI Metadata Refresh
on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  ai-metadata-update:
    name: AI Metadata Update on Deployment
    uses: AdobeDocs/adp-devsite-workflow/.github/workflows/ai-deploy-metadata.yml@ai-metadata
    with:
      FILE_NAME: "all_pages_content.txt"
    secrets:
      AZURE_OPENAI_ENDPOINT: ${{ secrets.AZURE_OPENAI_ENDPOINT }}
      AZURE_OPENAI_API_KEY: ${{ secrets.AZURE_OPENAI_API_KEY }}

  lint: 
    name: Lint
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Lint
        run: npx --yes github:AdobeDocs/adp-devsite-utils#add-lint-check runLint -v
